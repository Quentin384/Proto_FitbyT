<!DOCTYPE html>
<html lang="fr" class="scroll-smooth" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="dark light" />
    <title>Fit by T — Réserver une séance</title>
    <meta name="description" content="Réservez une séance : choix de formule, type de séance, calendrier et créneaux disponibles. Résumé et CTA clair." />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Tailwind CSS CDN -->
    <script>
      window.tailwind = { theme: { extend: { container: { center: true, padding: { DEFAULT: '1rem', md: '1.5rem', lg: '2rem' } } } } };
    </script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,container-queries"></script>

    <style>
      :root{ --bg: 12 12% 6%; --surface: 45 16% 10%; --muted: 48 15% 70%; --brand: 49 88% 51%; --ink: 54 40% 10%; }
      html{ font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans", Arial; }
      body{ background:hsl(var(--bg)); color:white; }
      .glass{ backdrop-filter:saturate(140%) blur(10px); background:hsl(var(--surface)/.55); border:1px solid hsl(0 0% 100%/.08); }
      .ring-gradient{ position:relative; }
      .ring-gradient::before{ content:""; position:absolute; inset:-1px; border-radius:16px; background:conic-gradient(from 0deg, hsl(var(--brand)) 0deg, transparent 120deg, transparent 240deg, hsl(var(--brand)) 360deg); filter:blur(.5px); -webkit-mask:linear-gradient(#000,#000) content-box, linear-gradient(#000,#000); -webkit-mask-composite:xor; mask-composite:exclude; padding:1px; pointer-events:none; }
      .hover-lift{ transition:transform .25s ease, box-shadow .25s ease; }
      .hover-lift:hover{ transform:translateY(-2px); box-shadow:0 10px 30px hsl(var(--brand)/.18); }
      .bg-grid{ background-image: radial-gradient(1100px 400px at 10% -10%, hsl(var(--brand)/.15), transparent 40%), radial-gradient(900px 600px at 90% 0%, hsl(260 90% 66%/.14), transparent 40%), radial-gradient(500px 400px at 60% 110%, hsl(170 80% 60%/.12), transparent 40%), linear-gradient(to bottom, hsl(var(--bg)), hsl(var(--bg))); background-repeat:no-repeat; }
      .slot{ cursor:pointer; }
      .slot[aria-disabled="true"]{ cursor:not-allowed; opacity:.5; }
      .slot[data-selected="true"]{ background:hsl(var(--brand)) !important; color:black !important; }
      .cal th{ font-weight:600; color: hsl(0 0% 98%/.8); font-size:.75rem; padding:.5rem 0; }
      .cal button{ height:3rem; width:100%; border-radius:.75rem; }
      .sticky-summary{ position: sticky; top: 5.5rem; }
    </style>
  </head>

  <body class="min-h-screen bg-grid antialiased selection:bg-yellow-300 selection:text-black">
    <!-- Header -->
    <header class="sticky top-0 z-40 backdrop-blur bg-black/40 border-b border-white/10">
      <div class="container flex h-16 items-center gap-3">
        <a href="index.html" class="flex items-center gap-2">
          <svg class="size-6 text-yellow-300" viewBox="0 0 48 48" fill="currentColor" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"><path d="M13.8261 30.5736C16.7203 29.8826 20.2244 29.4783 24 29.4783C27.7756 29.4783 31.2797 29.8826 34.1739 30.5736C36.9144 31.2278 39.9967 32.7669 41.3563 33.8352L24.8486 7.36089C24.4571 6.73303 23.5429 6.73303 23.1514 7.36089L6.64374 33.8352C8.00331 32.7669 11.0856 31.2278 13.8261 30.5736Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M39.998 35.764c-.004-.018-.01-.05-.023-.094a3.13 3.13 0 0 0-.193-.511 6.54 6.54 0 0 0-.053-.12c-1.271-.871-3.802-2.1-6.072-2.641C30.9875 31.8691 27.6413 31.4783 24 31.4783s-6.9875.3908-9.7095 1.0406c-2.29.5465-4.8462 1.7915-6.1059 2.6643-.0115.0243-.0232.0498-.0349.076-.0513.1159-.0933.2294-.1207.3298-.0262.0958-.0294.1443-.0298.1498 0 .0253.0104.3379.68485.8926.66061.5432 1.73734 1.1217 3.24421 1.6458C14.9242 39.319 19.1919 40 24 40s9.0758-.681 12.0709-1.7228c1.5069-.5241 2.5836-1.1026 3.2442-1.6458.5855-.4815.6706-.7803.6829-.8674ZM4.9518 32.7688 21.4543 6.3027c1.1745-1.8836 3.9169-1.88361 5.0914 0L43.0534 32.777c.0175.0282.0344.0568.0506.0859l-1.7477.9723c1.7477-.9723 1.7475-.9726 1.7477-.9723l.0011.0021.0014.0025.0036.0064.0098.0179c.0077.0142.0178.0328.0298.0555.0241.0452.0565.1072.0943.1826.075.1493.1756.3591.2777.6018.1684.4004.4783 1.1994.4783 2.0074 0 1.7036-.997 3.0384-2.1442 3.9818-1.1611.9548-2.7204 1.7255-4.4708 2.3343C33.8654 43.2794 29.133 44 24 44s-9.8669-.7206-13.3865-1.9448c-1.75037-.6088-3.30971-1.3795-4.47081-2.3343C4.9969 38.7775 4 37.4427 4 35.7391c0-.8666.2926-1.6469.4932-2.0998.1105-.2495.2202-.4589.3036-.6082.0421-.0755.0786-.1376.1066-.184l.0216-.0341.0075-.0119.0051-.0082Zm31.035-3.7648L24 9.78 12.0131 29.004c.453-.1431.9048-.2698 1.3486-.3758C16.4281 27.8961 20.0901 27.4783 24 27.4783s7.5719.4178 10.6383 1.1499c.4437.106 .8956.2327 1.3485.3758Z"/></svg>
          <span class="text-white text-lg font-extrabold tracking-tight">Fit by T</span>
        </a>
        <nav class="ml-auto hidden md:flex items-center gap-7 text-sm">
          <a class="hover:opacity-90" href="index.html">Accueil</a>
          <a class="hover:opacity-90" href="pricing.html">Tarifs</a>
          <a class="hover:opacity-90" href="booking.html">Réserver</a>
          <a class="hover:opacity-90" href="checkout.html">Paiement</a>
          <a class="hover:opacity-90" href="reservation.html">Mes séances</a>
          <a class="hover:opacity-90" href="profile.html">Profil</a>
        </nav>
        <button id="menuBtn" class="ml-auto md:hidden inline-flex items-center justify-center rounded-lg border border-white/20 size-10" aria-controls="mnav" aria-expanded="false" aria-label="Ouvrir le menu">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M3.75 5.25A.75.75 0 0 1 4.5 4.5h15a.75.75 0 0 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm0 7.5a.75.75 0 0 1 .75-.75h15a.75.75 0 0 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm.75 6.75a.75.75 0 0 0 0 1.5h15a.75.75 0 0 0 0-1.5h-15Z" clip-rule="evenodd"/></svg>
        </button>
      </div>
      <div id="mnav" class="hidden md:hidden border-t border-white/10">
        <nav class="container py-3 grid gap-2 text-sm">
          <a class="px-2 py-2 rounded-md hover:bg-white/5" href="index.html">Accueil</a>
          <a class="px-2 py-2 rounded-md hover:bg-white/5" href="pricing.html">Tarifs</a>
          <a class="px-2 py-2 rounded-md hover:bg-white/5" href="booking.html">Réserver</a>
          <a class="px-2 py-2 rounded-md hover:bg-white/5" href="checkout.html">Paiement</a>
          <a class="px-2 py-2 rounded-md hover:bg-white/5" href="reservation.html">Mes séances</a>
          <a class="px-2 py-2 rounded-md hover:bg-white/5" href="profile.html">Profil</a>
        </nav>
      </div>
    </header>

    <main class="container py-6 grid lg:grid-cols-[1.2fr_.8fr] gap-6">
      <!-- Left: booking form -->
      <section>
        <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight mb-1">Réserver une séance</h1>
        <p class="text-white/70 mb-6">Choisissez votre formule, le type de séance, une date et un créneau. Vous pourrez confirmer ensuite.</p>

        <!-- Stepper -->
        <ol class="flex items-center gap-3 text-sm mb-5" aria-label="Progression">
          <li class="inline-flex items-center gap-2"><span class="size-6 grid place-items-center rounded-full bg-yellow-300 text-black font-bold">1</span> Formule</li>
          <li class="text-white/40">—</li>
          <li class="inline-flex items-center gap-2"><span class="size-6 grid place-items-center rounded-full bg-white/10 font-bold">2</span> Date & créneau</li>
          <li class="text-white/40">—</li>
          <li class="inline-flex items-center gap-2"><span class="size-6 grid place-items-center rounded-full bg-white/10 font-bold">3</span> Confirmation</li>
        </ol>

        <!-- Controls -->
        <div class="grid md:grid-cols-3 gap-3">
          <label class="md:col-span-2">
            <span class="sr-only">Formule</span>
            <select class="w-full rounded-lg bg-white/5 border-white/10 h-12" aria-label="Choisir une formule" id="formula">
              <option value="">Choisir une formule</option>
              <option>Essentielle</option>
              <option>Premium</option>
              <option>Excellence</option>
            </select>
          </label>
          <fieldset class="rounded-lg bg-white/5 border border-white/10 grid grid-cols-2 overflow-hidden">
            <legend class="sr-only">Type de séance</legend>
            <label class="text-center py-2 cursor-pointer">
              <input type="radio" name="type" value="présentiel" class="peer sr-only" checked>
              <span class="block h-full w-full peer-checked:bg-yellow-300 peer-checked:text-black rounded-md py-2">Présentiel</span>
            </label>
            <label class="text-center py-2 cursor-pointer border-l border-white/10">
              <input type="radio" name="type" value="visio" class="peer sr-only">
              <span class="block h-full w-full peer-checked:bg-yellow-300 peer-checked:text-black rounded-md py-2">Visio</span>
            </label>
          </fieldset>
        </div>

        <!-- Calendars + slots -->
        <div class="mt-6 grid md:grid-cols-2 gap-4">
          <!-- Calendar -->
          <div class="glass rounded-2xl p-4">
            <div class="flex items-center justify-between">
              <button id="prevM" class="size-9 grid place-items-center rounded-lg border border-white/10 hover:bg-white/5" aria-label="Mois précédent">‹</button>
              <p id="monthLabel" class="text-lg font-semibold">Août 2025</p>
              <button id="nextM" class="size-9 grid place-items-center rounded-lg border border-white/10 hover:bg-white/5" aria-label="Mois suivant">›</button>
            </div>
            <div class="mt-2 cal">
              <table class="w-full text-center">
                <thead>
                  <tr><th>Lu</th><th>Ma</th><th>Me</th><th>Je</th><th>Ve</th><th>Sa</th><th>Di</th></tr>
                </thead>
                <tbody id="calBody" class="text-sm/none"></tbody>
              </table>
            </div>
          </div>

          <!-- Slots -->
          <div class="glass rounded-2xl p-4">
            <div class="flex items-center justify-between mb-2">
              <h2 class="text-base font-semibold">Créneaux disponibles</h2>
              <select id="duration" class="rounded-lg bg-white/5 border-white/10 h-9 text-sm">
                <option value="60">60 min</option>
                <option value="90">90 min</option>
              </select>
            </div>
            <div id="slots" class="grid grid-cols-2 sm:grid-cols-3 gap-2">
              <!-- filled by JS -->
            </div>
          </div>
        </div>

        <!-- Mobile sticky CTA -->
        <div class="md:hidden mt-6">
          <a href="#summary" class="block rounded-xl bg-yellow-300 text-black text-center font-bold py-3">Voir le récapitulatif</a>
        </div>
      </section>

      <!-- Right: Summary -->
      <aside id="summary" class="sticky-summary">
        <div class="ring-gradient glass rounded-2xl p-5">
          <h2 class="text-lg font-semibold mb-2">Résumé de la réservation</h2>
          <dl class="grid grid-cols-[auto_1fr] gap-x-4 gap-y-2 text-sm">
            <dt class="text-white/70">Formule</dt><dd id="sumFormula">—</dd>
            <dt class="text-white/70">Type</dt><dd id="sumType">Présentiel</dd>
            <dt class="text-white/70">Date</dt><dd id="sumDate">—</dd>
            <dt class="text-white/70">Heure</dt><dd id="sumTime">—</dd>
          </dl>
          <div class="mt-4 grid grid-cols-2 gap-2">
            <a href="checkout.html" class="rounded-lg bg-yellow-300 text-black font-semibold px-4 py-2 text-center hover:brightness-95">Confirmer</a>
            <button id="clearBtn" class="rounded-lg border border-white/10 px-4 py-2 hover:bg-white/5">Effacer</button>
          </div>
          <p class="text-xs text-white/60 mt-3">Annulation gratuite jusqu'à 24h avant la séance.</p>
        </div>
      </aside>
    </main>

    <!-- Footer -->
    <footer class="border-t border-white/10 bg-black/40 mt-8">
      <div class="container py-8 grid md:grid-cols-3 gap-6 text-sm text-white/70">
        <div>
          <div class="flex items-center gap-2 mb-2">
            <svg class="size-5 text-yellow-300" viewBox="0 0 48 48" fill="currentColor" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"><path d="M13.8261 30.5736C16.7203 29.8826 20.2244 29.4783 24 29.4783C27.7756 29.4783 31.2797 29.8826 34.1739 30.5736C36.9144 31.2278 39.9967 32.7669 41.3563 33.8352L24.8486 7.36089C24.4571 6.73303 23.5429 6.73303 23.1514 7.36089L6.64374 33.8352C8.00331 32.7669 11.0856 31.2278 13.8261 30.5736Z"/></svg>
            <span class="font-semibold">Fit by T</span>
          </div>
          <p>Coaching sportif personnalisé à Grenoble et en ligne.</p>
        </div>
        <nav class="grid gap-2">
          <a href="index.html" class="hover:opacity-90">Accueil</a>
          <a href="pricing.html" class="hover:opacity-90">Tarifs</a>
          <a href="booking.html" class="hover:opacity-90">Réserver</a>
          <a href="contact.html" class="hover:opacity-90">Contact</a>
        </nav>
        <div class="grid gap-2">
          <a href="#" class="hover:opacity-90">Mentions légales</a>
          <a href="#" class="hover:opacity-90">Politique de confidentialité</a>
          <p class="text-xs text-white/50">© <span id="y"></span> Fit by T.</p>
        </div>
      </div>
    </footer>

    <script>
      // Mobile nav
      (function(){
        const btn=document.getElementById('menuBtn'); const m=document.getElementById('mnav'); if(!btn||!m) return;
        const toggle=()=>{const open=m.classList.contains('hidden'); m.classList.toggle('hidden'); btn.setAttribute('aria-expanded', String(open));};
        btn.addEventListener('click',e=>{e.stopPropagation(); toggle();});
        document.addEventListener('click',e=>{ if(!m.contains(e.target) && e.target!==btn){ m.classList.add('hidden'); btn.setAttribute('aria-expanded','false'); } });
        addEventListener('resize',()=>{ if(innerWidth>=768){ m.classList.add('hidden'); btn.setAttribute('aria-expanded','false'); }});
      })();

      // Calendar + slots (vanilla, no deps)
      (function(){
        const monthLabel = document.getElementById('monthLabel');
        const calBody = document.getElementById('calBody');
        const prevM = document.getElementById('prevM');
        const nextM = document.getElementById('nextM');
        const slotsEl = document.getElementById('slots');
        const sumDate = document.getElementById('sumDate');
        const sumTime = document.getElementById('sumTime');
        const sumFormula = document.getElementById('sumFormula');
        const sumType = document.getElementById('sumType');
        const duration = document.getElementById('duration');
        const clearBtn = document.getElementById('clearBtn');
        const formulaSel = document.getElementById('formula');

        const MONTHS = ['janvier','février','mars','avril','mai','juin','juillet','août','septembre','octobre','novembre','décembre'];

        let current = new Date();
        current.setDate(1); // normalize to 1st

        function formatDate(d){
          return `${d.getDate()} ${MONTHS[d.getMonth()]} ${d.getFullYear()}`;
        }

        function renderCalendar(){
          monthLabel.textContent = `${MONTHS[current.getMonth()].charAt(0).toUpperCase()+MONTHS[current.getMonth()].slice(1)} ${current.getFullYear()}`;
          calBody.innerHTML = '';
          const firstDay = (current.getDay() + 6) % 7; // 0=Mon
          const daysInMonth = new Date(current.getFullYear(), current.getMonth()+1, 0).getDate();
          let day = 1; let row;
          for(let r=0; r<6; r++){
            row = document.createElement('tr');
            for(let c=0; c<7; c++){
              const cell = document.createElement('td'); cell.className='p-1';
              if(r===0 && c<firstDay || day>daysInMonth){ cell.innerHTML=''; }
              else{
                const btn = document.createElement('button'); btn.type='button'; btn.className='slot text-sm bg-white/5 border border-white/10'; btn.textContent=String(day);
                const dateObj = new Date(current.getFullYear(), current.getMonth(), day);
                btn.addEventListener('click', ()=> selectDate(dateObj));
                cell.appendChild(btn); day++;
              }
              row.appendChild(cell);
            }
            calBody.appendChild(row);
            if(day>daysInMonth) break;
          }
        }

        function generateSlots(date){
          // mock simple slot generation by hour window; in prod, fetch from API
          const base = [9, 10.5, 14, 16, 17.5];
          slotsEl.innerHTML = '';
          base.forEach(h => {
            const startH = Math.floor(h); const startM = (h%1)*60;
            const dur = parseInt(duration.value,10) || 60;
            const end = new Date(date); end.setHours(startH, startM+dur);
            const label = `${String(startH).padStart(2,'0')}h${String(startM||0).padStart(2,'0')} - ${String(end.getHours()).padStart(2,'0')}h${String(end.getMinutes()).padStart(2,'0')}`;
            const b = document.createElement('button');
            b.type='button'; b.className='slot rounded-lg bg-white/5 border border-white/10 px-3 py-2 text-sm text-left hover:bg-white/10';
            b.setAttribute('data-time', label);
            b.addEventListener('click', ()=>{ selectSlot(b); });
            b.textContent = label;
            slotsEl.appendChild(b);
          });
          // Example disabled slot
          if(slotsEl.firstElementChild){ slotsEl.firstElementChild.setAttribute('aria-disabled','true'); slotsEl.firstElementChild.classList.add('opacity-50'); slotsEl.firstElementChild.onclick=null; }
        }

        function selectDate(d){
          sumDate.textContent = formatDate(d);
          generateSlots(d);
          sumTime.textContent = '—';
          Array.from(calBody.querySelectorAll('button.slot')).forEach(btn=> btn.dataset.selected='false');
          // mark selected day visually
          const target = Array.from(calBody.querySelectorAll('button.slot')).find(btn => Number(btn.textContent)===d.getDate());
          if(target){ target.dataset.selected='true'; target.classList.add('bg-yellow-300','text-black'); }
        }

        function selectSlot(btn){
          if(btn.getAttribute('aria-disabled')==='true') return;
          Array.from(slotsEl.children).forEach(el=>{ el.dataset.selected='false'; });
          btn.dataset.selected='true';
          sumTime.textContent = btn.getAttribute('data-time');
        }

        function syncFormula(){ sumFormula.textContent = formulaSel.value || '—'; }
        function syncType(){ const t = document.querySelector('input[name="type"]:checked'); sumType.textContent = t? t.value.charAt(0).toUpperCase()+t.value.slice(1) : '—'; }

        prevM.addEventListener('click', ()=>{ current.setMonth(current.getMonth()-1); renderCalendar(); });
        nextM.addEventListener('click', ()=>{ current.setMonth(current.getMonth()+1); renderCalendar(); });
        duration.addEventListener('change', ()=>{
          // regenerate slots for current selected date
          const cur = sumDate.textContent && sumDate.textContent !== '—' ? new Date(current.getFullYear(), current.getMonth(), parseInt(sumDate.textContent,10)||1) : current;
          generateSlots(cur);
        });
        formulaSel.addEventListener('change', syncFormula);
        document.querySelectorAll('input[name="type"]').forEach(i=> i.addEventListener('change', syncType));
        clearBtn.addEventListener('click', ()=>{ sumDate.textContent='—'; sumTime.textContent='—'; sumFormula.textContent='—'; document.querySelector('input[name="type"][value="présentiel"]').checked=true; syncType(); slotsEl.innerHTML=''; });

        // init
        renderCalendar(); syncFormula(); syncType();
      })();

      // Year
      (function(){ const y=document.getElementById('y'); if(y) y.textContent=new Date().getFullYear(); })();
    </script>
  </body>
</html>
