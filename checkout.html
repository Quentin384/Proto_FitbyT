<!DOCTYPE html>
<html lang="fr" class="scroll-smooth" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="dark light" />
    <title>Fit by T — Paiement sécurisé</title>
    <meta name="description" content="Finalisez votre commande : récapitulatif, choix du mode de paiement, saisie sécurisée, 3-D Secure." />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Tailwind CSS CDN -->
    <script>
      window.tailwind = { theme: { extend: { container: { center: true, padding: { DEFAULT: '1rem', md: '1.5rem', lg: '2rem' } } } } };
    </script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,container-queries"></script>

    <style>
      :root { --bg: 12 12% 6%; --surface: 45 16% 10%; --muted: 48 15% 70%; --brand: 49 88% 51%; --ok: 140 70% 45%; }
      html { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans", Arial; }
      body { background: hsl(var(--bg)); color: white; }
      .glass { backdrop-filter: saturate(140%) blur(10px); background: hsl(var(--surface)/.55); border: 1px solid hsl(0 0% 100% / .08); }
      .ring-gradient { position: relative; }
      .ring-gradient::before{ content: ""; position: absolute; inset:-1px; border-radius: 16px; background: conic-gradient(from 0deg, hsl(var(--brand)) 0deg, transparent 120deg, transparent 240deg, hsl(var(--brand)) 360deg); filter: blur(.5px); -webkit-mask: linear-gradient(#000,#000) content-box, linear-gradient(#000,#000); -webkit-mask-composite: xor; mask-composite: exclude; padding:1px; pointer-events:none; }
      .bg-grid {
        background-image:
          radial-gradient(1100px 400px at 10% -10%, hsl(var(--brand)/.15), transparent 40%),
          radial-gradient(900px 600px at 90% 0%, hsl(260 90% 66%/.14), transparent 40%),
          radial-gradient(500px 400px at 60% 110%, hsl(170 80% 60%/.12), transparent 40%),
          linear-gradient(to bottom, hsl(var(--bg)), hsl(var(--bg)));
        background-repeat: no-repeat;
      }
      .tab { border-bottom: 2px solid transparent; }
      .tab[aria-selected="true"] { border-color: hsl(var(--brand)); color: hsl(var(--brand)); }
      .pay-btn[disabled] { opacity:.5; cursor:not-allowed; }
    </style>
  </head>

  <body class="min-h-screen bg-grid antialiased selection:bg-yellow-300 selection:text-black">
    <!-- Header -->
    <header class="sticky top-0 z-40 backdrop-blur bg-black/40 border-b border-white/10">
      <div class="container flex h-16 items-center gap-3">
        <a href="index.html" class="flex items-center gap-2">
          <svg class="size-6 text-yellow-300" viewBox="0 0 48 48" fill="currentColor" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M47.2426 24 24 47.2426.7574 24 24 .7574 47.2426 24Zm-35  -3h26.515L24 9.2426 12.2426 21Z"/></svg>
          <span class="text-white text-lg font-extrabold tracking-tight">Fit by T</span>
        </a>
        <nav class="ml-auto hidden md:flex items-center gap-7 text-sm">
          <a class="hover:opacity-90" href="pricing.html">Tarifs</a>
          <a class="hover:opacity-90" href="booking.html">Réserver</a>
          <a class="hover:opacity-90" href="reservation.html">Mes séances</a>
          <a class="hover:opacity-90" href="profile.html">Profil</a>
        </nav>
        <button id="menuBtn" class="ml-auto md:hidden inline-flex items-center justify-center rounded-lg border border-white/20 size-10" aria-controls="mnav" aria-expanded="false" aria-label="Ouvrir le menu">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M3.75 5.25A.75.75 0 0 1 4.5 4.5h15a.75.75 0 0 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm0 7.5a.75.75 0 0 1 .75-.75h15a.75.75 0 0 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm.75 6.75a.75.75 0 0 0 0 1.5h15a.75.75 0 0 0 0-1.5h-15Z" clip-rule="evenodd"/></svg>
        </button>
      </div>
      <div id="mnav" class="hidden md:hidden border-t border-white/10">
        <nav class="container py-3 grid gap-2 text-sm">
          <a class="px-2 py-2 rounded-md hover:bg-white/5" href="pricing.html">Tarifs</a>
          <a class="px-2 py-2 rounded-md hover:bg-white/5" href="booking.html">Réserver</a>
          <a class="px-2 py-2 rounded-md hover:bg-white/5" href="reservation.html">Mes séances</a>
          <a class="px-2 py-2 rounded-md hover:bg-white/5" href="profile.html">Profil</a>
        </nav>
      </div>
    </header>

    <main class="container py-6 grid lg:grid-cols-[1.1fr_.9fr] gap-6">
      <!-- Col gauche: Paiement -->
      <section class="min-w-0">
        <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight mb-1 text-center md:text-left">Paiement sécurisé</h1>
        <p class="text-white/70 mb-6 text-center md:text-left">Choisissez votre méthode et saisissez vos informations. Validation 3‑D Secure si nécessaire.</p>

        <div class="glass rounded-2xl p-4">
          <!-- Onglets méthodes -->
          <div class="flex items-center gap-6 border-b border-white/10 px-2">
            <button class="tab py-3 text-sm font-semibold" role="tab" aria-selected="true" aria-controls="tab-card" id="tab-card-btn">Carte bancaire</button>
            <button class="tab py-3 text-sm font-semibold" role="tab" aria-selected="false" aria-controls="tab-wallet" id="tab-wallet-btn">Portefeuilles</button>
            <button class="tab py-3 text-sm font-semibold" role="tab" aria-selected="false" aria-controls="tab-transfer" id="tab-transfer-btn">Virement</button>
          </div>

          <!-- Contenus -->
          <div class="p-4 grid gap-6">
            <!-- Carte -->
            <form id="tab-card" aria-labelledby="tab-card-btn" role="tabpanel" class="grid gap-3" autocomplete="cc-number">
              <div class="grid md:grid-cols-2 gap-3">
                <label class="grid gap-1">
                  <span class="text-sm text-white/80">Titulaire</span>
                  <input id="cardName" class="rounded-lg bg-white/5 border-white/10 h-11" placeholder="Nom sur la carte" autocomplete="cc-name"/>
                </label>
                <label class="grid gap-1">
                  <span class="text-sm text-white/80">Numéro</span>
                  <input id="cardNumber" inputmode="numeric" pattern="[0-9 ]*" maxlength="19" class="rounded-lg bg-white/5 border-white/10 h-11 tracking-widest" placeholder="1234 5678 9012 3456" autocomplete="cc-number"/>
                </label>
              </div>
              <div class="grid md:grid-cols-3 gap-3">
                <label class="grid gap-1">
                  <span class="text-sm text-white/80">Expiration</span>
                  <input id="cardExp" inputmode="numeric" maxlength="5" class="rounded-lg bg-white/5 border-white/10 h-11" placeholder="MM/AA" autocomplete="cc-exp"/>
                </label>
                <label class="grid gap-1">
                  <span class="text-sm text-white/80">CVV</span>
                  <input id="cardCvv" inputmode="numeric" maxlength="4" class="rounded-lg bg-white/5 border-white/10 h-11" placeholder="123" autocomplete="cc-csc"/>
                </label>
                <label class="grid gap-1">
                  <span class="text-sm text-white/80">Pays</span>
                  <select id="cardCountry" class="rounded-lg bg-white/5 border-white/10 h-11">
                    <option>France</option>
                    <option>Belgique</option>
                    <option>Suisse</option>
                    <option>Canada</option>
                  </select>
                </label>
              </div>
              <label class="inline-flex items-center gap-2 mt-1">
                <input id="saveCard" type="checkbox" class="rounded border-white/20 bg-transparent"/>
                <span class="text-sm text-white/80">Sauvegarder la carte pour les prochains paiements</span>
              </label>
            </form>

            <!-- Portefeuilles -->
            <div id="tab-wallet" aria-labelledby="tab-wallet-btn" role="tabpanel" hidden class="grid gap-3">
              <button class="rounded-lg border border-white/10 h-11 px-4 text-left hover:bg-white/5">Apple Pay</button>
              <button class="rounded-lg border border-white/10 h-11 px-4 text-left hover:bg-white/5">Google Pay</button>
              <button class="rounded-lg border border-white/10 h-11 px-4 text-left hover:bg-white/5">PayPal</button>
              <p class="text-xs text-white/60">Vous serez redirigé pour authentifier le paiement.</p>
            </div>

            <!-- Virement -->
            <div id="tab-transfer" aria-labelledby="tab-transfer-btn" role="tabpanel" hidden class="grid gap-3">
              <div class="rounded-lg bg-white/5 border border-white/10 p-4">
                <p class="text-sm">IBAN : <span class="font-mono">FR76 3000 4000 5000 6000 7000 801</span></p>
                <p class="text-sm">BIC : <span class="font-mono">BNPAFRPP</span></p>
                <p class="text-xs text-white/60 mt-1">Traitement sous 1 à 2 jours ouvrés. Votre réservation sera confirmée à réception.</p>
              </div>
            </div>

            <!-- Terms + action -->
            <label class="inline-flex items-center gap-2">
              <input id="terms" type="checkbox" class="rounded border-white/20 bg-transparent"/>
              <span class="text-sm">J'accepte les <a href="#" class="underline underline-offset-2">conditions générales</a> et la <a href="#" class="underline underline-offset-2">politique de confidentialité</a>.</span>
            </label>
            <button id="payBtn" class="pay-btn rounded-lg bg-yellow-300 text-black font-semibold px-4 py-3 mt-1">Confirmer et payer</button>
            <p class="text-xs text-white/60">Chiffrement TLS 1.2 • Conforme PCI‑DSS • 3‑D Secure activé.</p>
          </div>
        </div>
      </section>

      <!-- Col droite: Récap -->
      <aside class="sticky top-24 h-max">
        <div class="ring-gradient glass rounded-2xl p-5">
          <h2 class="text-lg font-semibold mb-2">Récapitulatif</h2>
          <dl class="grid grid-cols-[auto_1fr] gap-x-4 gap-y-2 text-sm">
            <dt class="text-white/70">Formule</dt><dd id="sumPlan">Coaching Premium (3 mois)</dd>
            <dt class="text-white/70">Séances supp.</dt><dd id="sumExtra">2 séances</dd>
            <dt class="text-white/70">Date</dt><dd id="sumDate">—</dd>
            <dt class="text-white/70">Heure</dt><dd id="sumTime">—</dd>
          </dl>
          <div class="my-4 border-t border-white/10"></div>
          <div class="grid gap-2 text-sm">
            <div class="flex justify-between"><span>Sous‑total</span><span id="subTotal">189,00 €</span></div>
            <div class="flex justify-between"><span>Frais</span><span id="fees">10,00 €</span></div>
            <div class="flex justify-between text-white/80"><span>TVA incluse</span><span id="vat">—</span></div>
            <div class="flex justify-between text-base font-extrabold pt-1"><span>Total</span><span id="grandTotal">199,00 €</span></div>
          </div>
          <div class="mt-4 grid grid-cols-3 gap-2 text-center text-[10px] text-white/60">
            <div class="rounded-lg border border-white/10 py-2">Paiement sécurisé</div>
            <div class="rounded-lg border border-white/10 py-2">Protection acheteur</div>
            <div class="rounded-lg border border-white/10 py-2">Annulation 24h</div>
          </div>
        </div>
      </aside>
    </main>

    <!-- Footer -->
    <footer class="border-t border-white/10 bg-black/40 mt-8">
      <div class="container py-8 grid md:grid-cols-3 gap-6 text-sm text-white/70">
        <div>
          <div class="flex items-center gap-2 mb-2">
            <svg class="size-5 text-yellow-300" viewBox="0 0 48 48" fill="currentColor" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M47.2426 24 24 47.2426.7574 24 24 .7574 47.2426 24Zm-35  -3h26.515L24 9.2426 12.2426 21Z"/></svg>
            <span class="font-semibold">Fit by T</span>
          </div>
          <p>Coaching sportif personnalisé à Grenoble et en ligne.</p>
        </div>
        <nav class="grid gap-2">
          <a href="index.html" class="hover:opacity-90">Accueil</a>
          <a href="pricing.html" class="hover:opacity-90">Tarifs</a>
          <a href="booking.html" class="hover:opacity-90">Réserver</a>
          <a href="contact.html" class="hover:opacity-90">Contact</a>
        </nav>
        <div class="grid gap-2">
          <a href="#" class="hover:opacity-90">Mentions légales</a>
          <a href="#" class="hover:opacity-90">Politique de confidentialité</a>
          <p class="text-xs text-white/50">© <span id="y"></span> Fit by T.</p>
        </div>
      </div>
    </footer>

    <script>
      // Mobile nav
      (function(){
        const btn=document.getElementById('menuBtn'); const m=document.getElementById('mnav'); if(!btn||!m) return;
        const toggle=()=>{const open=m.classList.contains('hidden'); m.classList.toggle('hidden'); btn.setAttribute('aria-expanded', String(open));};
        btn.addEventListener('click',e=>{e.stopPropagation(); toggle();});
        document.addEventListener('click',e=>{ if(!m.contains(e.target) && e.target!==btn){ m.classList.add('hidden'); btn.setAttribute('aria-expanded','false'); } });
        addEventListener('resize',()=>{ if(innerWidth>=768){ m.classList.add('hidden'); btn.setAttribute('aria-expanded','false'); }});
      })();

      // Tabs
      (function(){
        const tabs = [
          {btn:'tab-card-btn', panel:'tab-card'},
          {btn:'tab-wallet-btn', panel:'tab-wallet'},
          {btn:'tab-transfer-btn', panel:'tab-transfer'},
        ];
        const map = new Map();
        tabs.forEach(t=> map.set(t.btn, t.panel));
        function select(btnId){
          tabs.forEach(({btn,panel})=>{
            document.getElementById(btn).setAttribute('aria-selected', String(btn===btnId));
            const p = document.getElementById(panel);
            if(btn===btnId){ p.hidden=false; } else { p.hidden=true; }
          });
        }
        tabs.forEach(({btn})=> document.getElementById(btn).addEventListener('click',()=> select(btn)) );
        select('tab-card-btn');
      })();

      // Basic helpers (masking-ish)
      (function(){
        const num = document.getElementById('cardNumber');
        const exp = document.getElementById('cardExp');
        if(num){ num.addEventListener('input', e=>{ let v=e.target.value.replace(/\D/g,'').slice(0,16); e.target.value=v.replace(/(.{4})/g,'$1 ').trim(); }); }
        if(exp){ exp.addEventListener('input', e=>{ let v=e.target.value.replace(/\D/g,'').slice(0,4); if(v.length>2) v=v.slice(0,2)+'/'+v.slice(2); e.target.value=v; }); }
      })();

      // Terms + pay button enable, fake pay
      (function(){
        const terms=document.getElementById('terms'); const btn=document.getElementById('payBtn');
        function sync(){ btn.disabled = !terms.checked; }
        terms.addEventListener('change', sync); sync();
        btn.addEventListener('click', ()=>{
          if(btn.disabled) return;
          // In prod: call your payment intent endpoint here, then handle 3DS
          alert('Paiement initié. (Stub)');
        });
      })();

      // Pull booking info if present (querystring)
      (function(){
        const params = new URLSearchParams(location.search);
        const date = params.get('date');
        const time = params.get('time');
        const plan = params.get('plan');
        const extra = params.get('extra');
        if(date) document.getElementById('sumDate').textContent = date;
        if(time) document.getElementById('sumTime').textContent = time;
        if(plan) document.getElementById('sumPlan').textContent = plan;
        if(extra) document.getElementById('sumExtra').textContent = extra;
      })();

      // Year
      (function(){ const y=document.getElementById('y'); if(y) y.textContent=new Date().getFullYear(); })();
    </script>
  </body>
</html>
