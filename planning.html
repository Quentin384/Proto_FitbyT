<!DOCTYPE html>
<html lang="fr" class="scroll-smooth" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="dark light" />
    <title>Fit by T — Planning</title>
    <meta name="description" content="Planning des séances : vue semaine/mois, filtre client, type, statut; création rapide de séance." />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,container-queries"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            container: { center: true, padding: { DEFAULT: '1rem', md: '1.5rem', lg: '2rem' } },
            colors: {
              bg: '#0f0e09',
              surface: '#1b1a11',
              line: 'rgba(255,255,255,0.08)',
              brand: '#efcd0f',
              textmuted: 'rgba(255,255,255,0.68)'
            },
            boxShadow: {
              soft: '0 8px 30px rgba(0,0,0,.25)',
              glow: '0 0 0 1px rgba(255,255,255,.06), 0 8px 24px rgba(239,205,15,.12)'
            }
          }
        }
      }
    </script>
    <style>
      html{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans",Arial}
      body{background:radial-gradient(900px 600px at 90% -10%,rgba(239,205,15,.06),transparent 40%),
                       radial-gradient(800px 500px at 5% 110%,rgba(90,170,255,.08),transparent 40%),
                       linear-gradient(#0f0e09,#0f0e09);color:#fff}
      .glass{backdrop-filter:saturate(140%) blur(8px); background:rgba(27,26,17,.58); border:1px solid rgba(255,255,255,.08)}
      .tab{border-bottom:2px solid transparent}
      .tab[aria-selected="true"]{border-color:#efcd0f;color:#efcd0f}
      .chip{border:1px solid var(--line,rgba(255,255,255,.1)); background:rgba(255,255,255,.05)}
      .btn-brand{background:#efcd0f;color:#0f0e09}
      .btn-ghost{border:1px solid rgba(255,255,255,.12); background:transparent}
      .kbd{border:1px solid rgba(255,255,255,.18); padding:.15rem .35rem; border-radius:.375rem; font-size:.7rem}
    </style>
  </head>

  <body class="min-h-screen antialiased">
    <!-- Header -->
    <header class="sticky top-0 z-40 backdrop-blur bg-black/40 border-b border-line">
      <div class="container flex h-16 items-center gap-3">
        <a href="index.html" class="flex items-center gap-2">
          <svg class="size-6 text-brand" viewBox="0 0 48 48" fill="currentColor" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M47.2426 24 24 47.2426.7574 24 24 .7574 47.2426 24Zm-35-3h26.515L24 9.2426 12.2426 21Z"/></svg>
          <span class="text-lg font-extrabold tracking-tight">Fit by T</span>
        </a>
        <nav class="ml-auto hidden md:flex items-center gap-7 text-sm">
          <a class="hover:opacity-90" href="pricing.html">Tarifs</a>
          <a class="hover:opacity-90" href="booking.html">Réserver</a>
          <a class="hover:opacity-90" href="reservation.html">Mes séances</a>
          <a class="hover:opacity-90" href="profile.html">Profil</a>
        </nav>
        <button id="menuBtn" class="ml-auto md:hidden inline-flex items-center justify-center rounded-lg border border-white/20 size-10" aria-controls="mnav" aria-expanded="false" aria-label="Ouvrir le menu">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M3.75 5.25A.75.75 0 0 1 4.5 4.5h15a.75.75 0 0 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm0 7.5a.75.75 0 0 1 .75-.75h15a.75.75 0 0 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm.75 6.75a.75.75 0 0 0 0 1.5h15a.75.75 0 0 0 0-1.5h-15Z" clip-rule="evenodd"/></svg>
        </button>
      </div>
      <div id="mnav" class="hidden md:hidden border-t border-line">
        <nav class="container py-3 grid gap-2 text-sm">
          <a class="px-2 py-2 rounded-md hover:bg-white/5" href="pricing.html">Tarifs</a>
          <a class="px-2 py-2 rounded-md hover:bg-white/5" href="booking.html">Réserver</a>
          <a class="px-2 py-2 rounded-md hover:bg-white/5" href="reservation.html">Mes séances</a>
          <a class="px-2 py-2 rounded-md hover:bg-white/5" href="profile.html">Profil</a>
        </nav>
      </div>
    </header>

    <main class="container py-6 grid lg:grid-cols-[260px_1fr] gap-6">
      <!-- Sidebar (coach) -->
      <aside class="hidden lg:block">
        <div class="glass rounded-2xl p-4 shadow-soft">
          <div class="flex items-center gap-3 mb-3">
            <div class="size-10 rounded-full bg-cover bg-center" style="background-image:url('https://lh3.googleusercontent.com/aida-public/AB6AXuAxu0G35FnU9c4ECYcwT-1VQ6aT-gnKlGbyPDV_rSQUUAU9jV9aPaL__PdoJNReSzKvTojIsCcxlobrOxtk5J5rMY7-SizwvEkj3M_ftSG6INLJ_ukIW3xEmUcZFh6HMDm2J6bAit-cLf1HcaphgmTcPnx_Bx8OaLb4imQzDEzUZL4qt9mGOWHN1RcDdTFgs5Es5_CwpKPQ-cUXPfGVFjVShTVv8Eu2byENVW4_zuvmZ_KzcuJNgvci3evXlda9ctvnJ1n2vA_8pNtJ')"></div>
            <div>
              <p class="font-semibold">Thomas</p>
              <p class="text-textmuted text-sm">Coach sportif</p>
            </div>
          </div>
          <nav class="grid gap-1 text-sm">
            <a class="px-3 py-2 rounded-md hover:bg-white/5" href="index.html">Accueil</a>
            <a class="px-3 py-2 rounded-md hover:bg-white/5" href="clients.html">Clients</a>
            <a class="px-3 py-2 rounded-md bg-white/5 border border-line" href="#">Séances</a>
            <a class="px-3 py-2 rounded-md hover:bg-white/5" href="exercices.html">Exercices</a>
            <a class="px-3 py-2 rounded-md hover:bg-white/5" href="settings.html">Paramètres</a>
          </nav>
        </div>
      </aside>

      <!-- Main content -->
      <section class="min-w-0">
        <div class="flex flex-wrap items-center gap-3 mb-2">
          <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight">Planning des séances</h1>
          <span class="text-xs text-textmuted ml-auto">Fuseau : Europe/Paris</span>
        </div>

        <!-- Tabs week / month + filters -->
        <div class="glass rounded-xl p-3 shadow-soft">
          <div class="flex flex-wrap items-center gap-2 border-b border-line px-1">
            <button class="tab py-2 text-sm font-semibold" aria-controls="view-week" aria-selected="true" id="tab-week">Hebdomadaire</button>
            <button class="tab py-2 text-sm font-semibold" aria-controls="view-month" aria-selected="false" id="tab-month">Mensuel</button>
            <div class="ml-auto flex items-center gap-2 py-1">
              <label class="relative">
                <input id="q" placeholder="Rechercher client…" class="rounded-lg bg-white/5 border-line h-9 pl-9 pr-3 w-56" />
                <svg class="size-4 absolute left-3 top-1/2 -translate-y-1/2 text-white/60" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M10 2a8 8 0 015.292 13.707l4 4a1 1 0 01-1.414 1.414l-4-4A8 8 0 1110 2zm0 2a6 6 0 100 12 6 6 0 000-12z"/></svg>
              </label>
              <select id="filterType" class="rounded-lg bg-white/5 border-line h-9">
                <option value="">Type</option>
                <option>Présentiel</option>
                <option>Visio</option>
              </select>
              <select id="filterPlan" class="rounded-lg bg-white/5 border-line h-9">
                <option value="">Formule</option>
                <option>Essentielle</option>
                <option>Premium</option>
                <option>Équilibre</option>
              </select>
              <button id="addBtn" class="btn-brand rounded-lg h-9 px-3 font-semibold">Ajouter</button>
            </div>
          </div>

          <!-- Week view -->
          <div id="view-week" role="tabpanel" aria-labelledby="tab-week" class="p-3 grid gap-3">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-2">
                <button id="prevWeek" class="btn-ghost rounded-lg h-9 px-3">⟵</button>
                <button id="todayBtn" class="btn-ghost rounded-lg h-9 px-3">Aujourd'hui <span class="kbd ml-1">T</span></button>
                <button id="nextWeek" class="btn-ghost rounded-lg h-9 px-3">⟶</button>
              </div>
              <p id="weekTitle" class="text-sm text-textmuted">—</p>
            </div>

            <div class="overflow-x-auto rounded-lg border border-line">
              <table class="min-w-[720px] w-full">
                <thead>
                  <tr class="bg-white/5">
                    <th class="px-4 py-3 text-left text-sm">Heure</th>
                    <th class="px-4 py-3 text-left text-sm">Client</th>
                    <th class="px-4 py-3 text-left text-sm">Formule</th>
                    <th class="px-4 py-3 text-left text-sm">Type</th>
                    <th class="px-4 py-3 text-left text-sm">Actions</th>
                  </tr>
                </thead>
                <tbody id="weekRows">
                  <!-- rows injected by JS -->
                </tbody>
              </table>
            </div>
          </div>

          <!-- Month view -->
          <div id="view-month" role="tabpanel" aria-labelledby="tab-month" class="p-3 grid gap-3" hidden>
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-2">
                <button id="prevMonth" class="btn-ghost rounded-lg h-9 px-3">⟵</button>
                <button id="nextMonth" class="btn-ghost rounded-lg h-9 px-3">⟶</button>
              </div>
              <p id="monthTitle" class="text-sm text-textmuted">—</p>
            </div>
            <div class="grid grid-cols-7 gap-2">
              <template id="dayCellTpl">
                <div class="glass rounded-lg p-2 min-h-28">
                  <div class="flex items-center justify-between text-xs text-textmuted">
                    <span class="font-semibold daynum">1</span>
                    <span class="badge hidden rounded px-2 py-0.5 bg-white/10">0</span>
                  </div>
                  <div class="mt-2 grid gap-1 text-[11px] text-white/80">
                    <!-- sessions -->
                  </div>
                </div>
              </template>
              <div id="monthGrid" class="contents"></div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Add modal (simple) -->
    <dialog id="addDlg" class="glass rounded-xl p-0 w-[min(520px,92vw)] text-white backdrop:bg-black/60">
      <form method="dialog">
        <div class="p-4 border-b border-line flex items-center justify-between">
          <h3 class="font-semibold">Nouvelle séance</h3>
          <button class="rounded-lg px-2 py-1 hover:bg-white/5">✕</button>
        </div>
      </form>
      <div class="p-4 grid gap-3">
        <label class="grid gap-1 text-sm">
          <span>Client</span>
          <input id="fClient" class="rounded-lg bg-white/5 border-line h-10" placeholder="Nom du client"/>
        </label>
        <div class="grid md:grid-cols-3 gap-3">
          <label class="grid gap-1 text-sm"><span>Date</span><input id="fDate" type="date" class="rounded-lg bg-white/5 border-line h-10"/></label>
          <label class="grid gap-1 text-sm"><span>Heure</span><input id="fTime" type="time" class="rounded-lg bg-white/5 border-line h-10"/></label>
          <label class="grid gap-1 text-sm"><span>Durée</span><select id="fDur" class="rounded-lg bg-white/5 border-line h-10"><option>60</option><option>90</option></select></label>
        </div>
        <div class="grid md:grid-cols-2 gap-3">
          <label class="grid gap-1 text-sm"><span>Formule</span>
            <select id="fPlan" class="rounded-lg bg-white/5 border-line h-10">
              <option>Essentielle</option><option>Premium</option><option>Équilibre</option>
            </select>
          </label>
          <label class="grid gap-1 text-sm"><span>Type</span>
            <select id="fType" class="rounded-lg bg-white/5 border-line h-10">
              <option>Présentiel</option><option>Visio</option>
            </select>
          </label>
        </div>
        <div class="flex justify-end gap-2 pt-2">
          <button id="dlgCancel" class="btn-ghost rounded-lg h-10 px-4">Annuler</button>
          <button id="dlgSave" class="btn-brand rounded-lg h-10 px-4 font-semibold">Enregistrer</button>
        </div>
      </div>
    </dialog>

    <footer class="border-t border-line mt-8">
      <div class="container py-6 text-sm text-textmuted">© <span id="y"></span> Fit by T.</div>
    </footer>

    <script>
      // Mobile nav
      (function(){
        const btn=document.getElementById('menuBtn'); const m=document.getElementById('mnav'); if(!btn||!m) return;
        const toggle=()=>{const open=m.classList.contains('hidden'); m.classList.toggle('hidden'); btn.setAttribute('aria-expanded', String(open));};
        btn.addEventListener('click',e=>{e.stopPropagation(); toggle();});
        document.addEventListener('click',e=>{ if(!m.contains(e.target) && e.target!==btn){ m.classList.add('hidden'); btn.setAttribute('aria-expanded','false'); } });
        addEventListener('resize',()=>{ if(innerWidth>=768){ m.classList.add('hidden'); btn.setAttribute('aria-expanded','false'); }});
      })();

      // Data (mock)
      const SESS = [
        {date:'2024-05-13', start:'10:00', end:'11:00', client:'Sophie Martin', plan:'Essentielle', type:'Présentiel'},
        {date:'2024-05-13', start:'14:00', end:'15:30', client:'Thomas Dubois', plan:'Premium', type:'Visio'},
        {date:'2024-05-13', start:'17:00', end:'18:00', client:'Camille Leroy', plan:'Équilibre', type:'Présentiel'},
        {date:'2024-05-14', start:'09:30', end:'10:30', client:'Lina Costa', plan:'Premium', type:'Visio'},
        {date:'2024-05-16', start:'18:00', end:'19:00', client:'Alex Morel', plan:'Essentielle', type:'Présentiel'}
      ];

      // Tabs
      (function(){
        const tabs=[['tab-week','view-week'],['tab-month','view-month']];
        function select(id){
          tabs.forEach(([b,p])=>{
            document.getElementById(b).setAttribute('aria-selected', String(b===id));
            document.getElementById(p).hidden = (b!==id);
          });
        }
        tabs.forEach(([b])=> document.getElementById(b).addEventListener('click',()=>select(b)));
        select('tab-week');
      })();

      // Helpers
      const fmtFR = new Intl.DateTimeFormat('fr-FR',{weekday:'long',day:'2-digit',month:'long',year:'numeric'});
      const ymFR = new Intl.DateTimeFormat('fr-FR',{month:'long',year:'numeric'});
      const isoToDate = (s)=>{const [y,m,d]=s.split('-').map(Number); return new Date(y,m-1,d);};
      const range = (n)=>Array.from({length:n},(_,i)=>i);

      // Week view logic
      (function(){
        let anchor = new Date('2024-05-13T00:00:00'); // default anchor (same as sample)
        const weekTitle=document.getElementById('weekTitle');
        const rows=document.getElementById('weekRows');
        function weekStart(d){ const x=new Date(d); const wd=(x.getDay()+6)%7; x.setDate(x.getDate()-wd); x.setHours(0,0,0,0); return x; }
        function addDays(d,n){ const x=new Date(d); x.setDate(x.getDate()+n); return x; }
        function toISO(d){ return d.toISOString().slice(0,10); }
        function draw(){
          const ws=weekStart(anchor); const we=addDays(ws,6);
          weekTitle.textContent = `${fmtFR.format(ws)} — ${fmtFR.format(we)}`;
          const q = document.getElementById('q').value.trim().toLowerCase();
          const type = document.getElementById('filterType').value;
          const plan = document.getElementById('filterPlan').value;
          const week = SESS.filter(s=>{const d=isoToDate(s.date); return d>=ws && d<=we;})
            .filter(s=> !q || `${s.client}`.toLowerCase().includes(q))
            .filter(s=> !type || s.type===type)
            .filter(s=> !plan || s.plan===plan);
          rows.innerHTML = '';
          if(week.length===0){ rows.innerHTML = `<tr><td colspan="5" class="px-4 py-8 text-center text-white/60">Aucune séance pour cette semaine.</td></tr>`; return; }
          week.sort((a,b)=> (a.date+a.start).localeCompare(b.date+b.start));
          for(const s of week){
            const tr=document.createElement('tr');
            tr.className='border-t border-line hover:bg-white/5';
            tr.innerHTML = `
              <td class="px-4 py-3 text-white/80 whitespace-nowrap">${s.start} - ${s.end}</td>
              <td class="px-4 py-3 font-medium whitespace-nowrap">${s.client}</td>
              <td class="px-4 py-3 text-white/70 whitespace-nowrap">${s.plan}</td>
              <td class="px-4 py-3 whitespace-nowrap">${s.type}</td>
              <td class="px-4 py-3 whitespace-nowrap">
                <button class="btn-ghost rounded-lg h-8 px-3">Détails</button>
                <button class="btn-ghost rounded-lg h-8 px-3">Déplacer</button>
                <button class="btn-ghost rounded-lg h-8 px-3">Annuler</button>
              </td>`;
            rows.appendChild(tr);
          }
        }
        document.getElementById('prevWeek').addEventListener('click',()=>{anchor.setDate(anchor.getDate()-7); draw();});
        document.getElementById('nextWeek').addEventListener('click',()=>{anchor.setDate(anchor.getDate()+7); draw();});
        document.getElementById('todayBtn').addEventListener('click',()=>{anchor=new Date(); draw();});
        ['q','filterType','filterPlan'].forEach(id=> document.getElementById(id).addEventListener('input', draw));
        draw();
      })();

      // Month view logic
      (function(){
        let monthAnchor = new Date('2024-05-01T00:00:00');
        const grid=document.getElementById('monthGrid'); const tpl=document.getElementById('dayCellTpl'); const title=document.getElementById('monthTitle');
        function daysInMonth(y,m){ return new Date(y,m+1,0).getDate(); }
        function draw(){
          const y=monthAnchor.getFullYear(); const m=monthAnchor.getMonth();
          title.textContent = ymFR.format(monthAnchor);
          grid.innerHTML='';
          const start = new Date(y,m,1); const offset=(start.getDay()+6)%7; // Monday first
          const n=daysInMonth(y,m);
          range(offset).forEach(()=> grid.appendChild(document.createElement('div')));
          for(let d=1; d<=n; d++){
            const node=tpl.content.cloneNode(true);
            node.querySelector('.daynum').textContent=d;
            const dateISO = `${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
            const items = SESS.filter(s=> s.date===dateISO);
            const list = node.querySelector('.grid');
            items.slice(0,3).forEach(s=>{
              const p=document.createElement('div');
              p.textContent = `${s.start} ${s.client}`;
              list.appendChild(p);
            });
            const badge = node.querySelector('.badge');
            if(items.length>3){ badge.textContent = `+${items.length-3}`; badge.classList.remove('hidden'); }
            grid.appendChild(node);
          }
        }
        document.getElementById('prevMonth').addEventListener('click',()=>{monthAnchor.setMonth(monthAnchor.getMonth()-1); draw();});
        document.getElementById('nextMonth').addEventListener('click',()=>{monthAnchor.setMonth(monthAnchor.getMonth()+1); draw();});
        draw();
      })();

      // Add dialog
      (function(){
        const dlg=document.getElementById('addDlg');
        document.getElementById('addBtn').addEventListener('click',()=> dlg.showModal());
        document.getElementById('dlgCancel').addEventListener('click',()=> dlg.close());
        document.getElementById('dlgSave').addEventListener('click',()=>{
          // Stub: persist to API here, then refresh views
          dlg.close(); alert('Séance enregistrée (stub).');
        });
      })();

      // Year
      (function(){ const y=document.getElementById('y'); if(y) y.textContent=new Date().getFullYear(); })();
    </script>
  </body>
</html>
